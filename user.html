<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Update user file</title>
        <link rel="stylesheet" href="styles/styles.css">
        <script src="./scripts/firebase.js"></script>
        <script type = "module">
            import { getDatabase, ref, child, get, update } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js";
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js";
            
            const app = initializeApp(firebaseConfig);
            const database = getDatabase(app);
            let myUser;

            // Get a reference to the Firebase Realtime Database
            const dbRef = ref(database);

            // Get user to display
            function displayUserData() {
              document.getElementById("firstName").value = myUser.first_name;
              document.getElementById("lastName").value = myUser.last_name;
              document.getElementById("ucfid").value = myUser.ucf_id;
              document.getElementById("nid").value = myUser.nid;
              document.getElementById("cash").value = myUser.knights_cash_account;
              document.getElementById("library").value = myUser.library_account;
              document.getElementById("dob").value = myUser.date_of_birth;
              document.getElementById("expiration").value = myUser.expiration_date;
              document.getElementById("campus").value = myUser.campus;
              document.getElementById("caste").value = myUser.caste;
            }

            function init() {
             // Get the UCF ID from the URL query parameter
             const urlParams = new URLSearchParams(window.location.search);
             const ucfid = urlParams.get('ucfid');

             const userRef = child(ref(database), `users/${ucfid}`);

            // Retrieve the user's data from the database
            get(userRef).then((snapshot) => {
            if (snapshot.exists()) {
              const user = snapshot.val();
              myUser = user; 
            }
            displayUserData();
          }
            )
            
      }
        window.addEventListener("load", init, false);
</script>
        </script>
    </head>
    <body>
        <!--Add UCF Banner-->
        <div class="banner">
            <div class="ucf_banner">
                <div class="ucf_logos">
                  <img src="admin/User Search/The tab crop.png" alt="logo" width="50">
                <img src="admin/User Search/KNIGHTS CREST.png" alt="logo" height = "32px">
                </div>
        
                <div class = "top_menu">
                  <a href = "KnightsCrest_AdminUserSettings.html">
                  <img src = "Admin/Dashboard/Icon material-settings.png" alt="settings" width="25"> 
                  </a>/n
                  
                  <a href = "KnightsCrest_Admin.html">
                  <img src = "Admin/Dashboard/Icon ionic-md-exit.png" alt="settings" width="24">
                  </a>
                </div>
            </div>
        </div>
        <!--Add Sidebar-->
        <div class="sidenav">
            <img id = "profile_pic" src="admin/Add New User/Component 31. 3.png" alt="Profile Pic">
          
              <h2 id = "sidebar_title">Functions</h2>
              <a href = "KnightsCrest_AdminHome.html">
              <button id = "button">
                <img src="admin/User Search/Search Records Button.png" alt="Search Records">
             </button>
              </a>
          
             <a href = "KnightsCrest_AdminAdd.html">
             <button id = "button">
              <img src="admin/User Search/Add Record Button.png" alt="Add Records">
           </button>
             </a>
           </div>
           <div id = title>
            <h1>RESULTS</h1>  
          </div>
        <div class = "main">
      <!-- Search form -->
      <div class="row">
        <form action="process_form.js" method="post" name="myform">
        <fieldset>
        <div class="column">
          <label for="firstName">First name:</label><br>
          <input type="text" id="firstName" name="firstName" placeholder="First Name"><br><br>
    
          <label for="ucfid">UCF ID:</label><br>
          <input type="text" id="ucfid" name="ucfid" placeholder="123456"><br><br>
        
          <label for="cash">Knights Cash Account:</label><br>
          <input type="text" id="cash" name="cash" placeholder="123456123456"><br><br>
    
          <label for="dob">Date of Birth:</label><br>
          <input type="text" id="dob" name="dob" placeholder="DD/MM/YYYY"><br><br>

          <label for="campus">Campus:</label><br>
          <select id="campus">
            <option value="" disabled selected>Select a campus</option>
            <option value="Main Campus">UCF Main Campus</option>
            <option value="Downtown">UCF Downtown</option>
            <option value="Online">UCF Online</option>
            <option value="Rosen">Rosen</option>
          </select><br><br>
            <input type="submit"  id="update" name="submit" value="Update">
            <input type="submit"  id="delete" onclick="remove()" name="submit" value="Delete">
          </div>
          <div class="column">
            <label for="lastName">Last name:</label><br>
            <input type="text" id="lastName" name="lastName" placeholder="Last Name"><br><br>

            <label for="nid">Student NID:</label><br>
            <input type="text" id="nid" name="nid" placeholder="ik123456"><br><br>
    
            <label for="library">Library Number:</label><br>
            <input type="text" id="library" name="library" placeholder="2210347983785"><br><br>

            <label for="expiration">Expiration Date:</label><br>
            <input type="text" id="expiration" name="expiration" placeholder="05/23/2025"><br><br>

            <label for="caste">Caste:</label><br>
            <input type="radio" id="caste" name="caste" value="Student">
            <label for="student">Student</label><br>
            <input type="radio" id="caste" name="caste" value="Teacher">
            <label for="teacher">Teacher</label><br>
            <input type="radio" id="caste" name="caste" value="Staff">
            <label for="staff">Staff</label><br><br>
        </fieldset>
        </form> 
    </body>
</html>
